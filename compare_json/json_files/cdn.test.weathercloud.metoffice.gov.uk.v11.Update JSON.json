{
    "name": "Update JSON",
    "children": [
        {
            "name": "Android App upgrade banner",
            "children": [],
            "behaviors": [
                {
                    "name": "origin",
                    "options": {
                        "originType": "NET_STORAGE",
                        "netStorage": {
                            "downloadDomainName": "metofficens.download.akamai.com",
                            "cpCode": 392687,
                            "g2oToken": null
                        }
                    }
                },
                {
                    "name": "rewriteUrl",
                    "options": {
                        "behavior": "REWRITE",
                        "targetUrl": "/PRE/update_unsupported_app.json"
                    }
                }
            ],
            "criteria": [
                {
                    "name": "queryStringParameter",
                    "options": {
                        "parameterName": "platform",
                        "matchOperator": "IS_ONE_OF",
                        "values": [
                            "android"
                        ],
                        "matchWildcardName": false,
                        "matchCaseSensitiveName": false,
                        "matchWildcardValue": false,
                        "matchCaseSensitiveValue": false,
                        "escapeValue": false
                    }
                },
                {
                    "name": "queryStringParameter",
                    "options": {
                        "parameterName": "app-version",
                        "matchOperator": "IS_ONE_OF",
                        "matchWildcardName": false,
                        "matchCaseSensitiveName": true,
                        "values": [
                            "1.*",
                            "2.1.*",
                            "2.2.*",
                            "2.3.*",
                            "2.4.*",
                            "2.5.*",
                            "2.6.*",
                            "2.7.*",
                            "2.8.*",
                            "2.9.*",
                            "2.10.*",
                            "2.11.*",
                            "2.12.*",
                            "2.13.*",
                            "2.14.*",
                            "2.15.*",
                            "2.16.*",
                            "2.17.*",
                            "2.18.*",
                            "2.19.*",
                            "2.20.*",
                            "2.21.*",
                            "2.22.*",
                            "2.23.*",
                            "2.24.*",
                            "2.25.*",
                            "2.26.*",
                            "2.27.*",
                            "2.28.*",
                            "2.29.*",
                            "2.30.*",
                            "2.31.*"
                        ],
                        "matchWildcardValue": true,
                        "matchCaseSensitiveValue": true,
                        "escapeValue": false
                    }
                }
            ],
            "criteriaMustSatisfy": "all",
            "comments": "Android app-version (everything prior to 2.32.0)"
        },
        {
            "name": "iOS App upgrade banner",
            "children": [],
            "behaviors": [
                {
                    "name": "origin",
                    "options": {
                        "originType": "NET_STORAGE",
                        "netStorage": {
                            "downloadDomainName": "metofficens.download.akamai.com",
                            "cpCode": 392687,
                            "g2oToken": null
                        }
                    }
                },
                {
                    "name": "rewriteUrl",
                    "options": {
                        "behavior": "REWRITE",
                        "targetUrl": "/PRE/update_unsupported_app.json"
                    }
                }
            ],
            "criteria": [
                {
                    "name": "queryStringParameter",
                    "options": {
                        "parameterName": "platform",
                        "matchOperator": "IS_ONE_OF",
                        "values": [
                            "iOS"
                        ],
                        "matchWildcardName": false,
                        "matchCaseSensitiveName": false,
                        "matchWildcardValue": false,
                        "matchCaseSensitiveValue": false,
                        "escapeValue": false
                    }
                },
                {
                    "name": "queryStringParameter",
                    "options": {
                        "parameterName": "app-version",
                        "matchOperator": "IS_ONE_OF",
                        "matchWildcardName": false,
                        "matchCaseSensitiveName": true,
                        "values": [
                            "1.*",
                            "2.1.*",
                            "2.2.*",
                            "2.3.*",
                            "2.4.*",
                            "2.5.*",
                            "2.6.*",
                            "2.7.*",
                            "2.8.*",
                            "2.9.*",
                            "2.10.*",
                            "2.11.*",
                            "2.12.*",
                            "2.13.*",
                            "2.14.*",
                            "2.15.*",
                            "2.16.*",
                            "2.17.*",
                            "2.18.*",
                            "2.19.*",
                            "2.20.*",
                            "2.21.*",
                            "2.22.*",
                            "2.23.*",
                            "2.24.*",
                            "2.25.*",
                            "2.26.*",
                            "2.27.*",
                            "2.28.0",
                            "2.28.1",
                            "2.28.2",
                            "2.28.3",
                            "2.28.4",
                            "2.28.5"
                        ],
                        "matchWildcardValue": true,
                        "matchCaseSensitiveValue": true,
                        "escapeValue": false
                    }
                }
            ],
            "criteriaMustSatisfy": "all",
            "comments": "iOS app-version (everything prior to 2.28.6)"
        },
        {
            "name": "Android OS upgrade banner",
            "children": [],
            "behaviors": [
                {
                    "name": "origin",
                    "options": {
                        "originType": "NET_STORAGE",
                        "netStorage": {
                            "downloadDomainName": "metofficens.download.akamai.com",
                            "cpCode": 392687,
                            "g2oToken": null
                        }
                    }
                },
                {
                    "name": "rewriteUrl",
                    "options": {
                        "behavior": "REWRITE",
                        "targetUrl": "/PRE/update_unsupported_os.json"
                    }
                }
            ],
            "criteria": [
                {
                    "name": "queryStringParameter",
                    "options": {
                        "parameterName": "platform",
                        "matchOperator": "IS_ONE_OF",
                        "values": [
                            "android"
                        ],
                        "matchWildcardName": false,
                        "matchCaseSensitiveName": false,
                        "matchWildcardValue": false,
                        "matchCaseSensitiveValue": false,
                        "escapeValue": false
                    }
                },
                {
                    "name": "queryStringParameter",
                    "options": {
                        "parameterName": "os-version",
                        "matchOperator": "IS_ONE_OF",
                        "matchWildcardName": false,
                        "matchCaseSensitiveName": true,
                        "values": [
                            "1.*",
                            "2.*",
                            "3.*",
                            "4.*",
                            "5.*",
                            "6.*",
                            "7.*",
                            "1",
                            "2",
                            "3",
                            "4",
                            "5",
                            "6",
                            "7"
                        ],
                        "matchWildcardValue": true,
                        "matchCaseSensitiveValue": true,
                        "escapeValue": false
                    }
                }
            ],
            "criteriaMustSatisfy": "all",
            "comments": "Android os-version (everything prior to 8)"
        },
        {
            "name": "iOS OS upgrade banner",
            "children": [],
            "behaviors": [
                {
                    "name": "origin",
                    "options": {
                        "originType": "NET_STORAGE",
                        "netStorage": {
                            "downloadDomainName": "metofficens.download.akamai.com",
                            "cpCode": 392687,
                            "g2oToken": null
                        }
                    }
                },
                {
                    "name": "rewriteUrl",
                    "options": {
                        "behavior": "REWRITE",
                        "targetUrl": "/PRE/update_unsupported_os.json"
                    }
                }
            ],
            "criteria": [
                {
                    "name": "queryStringParameter",
                    "options": {
                        "parameterName": "platform",
                        "matchOperator": "IS_ONE_OF",
                        "values": [
                            "iOS"
                        ],
                        "matchWildcardName": false,
                        "matchCaseSensitiveName": false,
                        "matchWildcardValue": false,
                        "matchCaseSensitiveValue": false,
                        "escapeValue": false
                    }
                },
                {
                    "name": "queryStringParameter",
                    "options": {
                        "parameterName": "os-version",
                        "matchOperator": "IS_ONE_OF",
                        "matchWildcardName": false,
                        "matchCaseSensitiveName": true,
                        "values": [
                            "1.*",
                            "2.*",
                            "3.*",
                            "4.*",
                            "5.*",
                            "6.*",
                            "7.*",
                            "8.*",
                            "9.*",
                            "10.*",
                            "11.*",
                            "12.*",
                            "13.*",
                            "1",
                            "2",
                            "3",
                            "4",
                            "5",
                            "6",
                            "7",
                            "8",
                            "9",
                            "10",
                            "11",
                            "12",
                            "13"
                        ],
                        "matchWildcardValue": true,
                        "matchCaseSensitiveValue": true,
                        "escapeValue": false
                    }
                }
            ],
            "criteriaMustSatisfy": "all",
            "comments": "iOS os-version (everything prior to 14)"
        }
    ],
    "behaviors": [
        {
            "name": "origin",
            "options": {
                "originType": "NET_STORAGE",
                "netStorage": {
                    "downloadDomainName": "metofficens.download.akamai.com",
                    "cpCode": 392687,
                    "g2oToken": null
                }
            }
        },
        {
            "name": "rewriteUrl",
            "options": {
                "behavior": "REWRITE",
                "targetUrl": "/PRE/update_empty.json"
            }
        },
        {
            "name": "caching",
            "options": {
                "behavior": "MAX_AGE",
                "mustRevalidate": false,
                "ttl": "1h"
            }
        },
        {
            "name": "downstreamCache",
            "options": {
                "behavior": "ALLOW",
                "allowBehavior": "FROM_VALUE",
                "sendHeaders": "CACHE_CONTROL_AND_EXPIRES",
                "sendPrivate": false,
                "ttl": "5m"
            }
        },
        {
            "name": "cacheKeyQueryParams",
            "options": {
                "behavior": "IGNORE_ALL"
            }
        }
    ],
    "criteria": [
        {
            "name": "path",
            "options": {
                "matchOperator": "MATCHES_ONE_OF",
                "values": [
                    "/update"
                ],
                "matchCaseSensitive": false,
                "normalize": false
            }
        }
    ],
    "criteriaMustSatisfy": "all",
    "comments": "Apply logic to incoming requests for /update to return specific JSON payloads."
}